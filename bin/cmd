#!/bin/bash -e

action=$1
filename=$2
bin=~/bin

usage() {
  echo "Usage: `basename $0` (edit|ledit) script"
  exit 2
}

ensureScriptExistsAndIsExecutable() {
  if [ ! -f $1 ]; then
    touch $1
    chmod +x $1
    echo "#!/bin/bash -e" >> $1
    echo "" >> $1
  fi
}

edit() {
  ensureScriptExistsAndIsExecutable $1
  vim $1
}

case "$action" in
  "ledit")
    script_root=$bin/local
    ;;
  "edit")
    script_root=$bin
    ;;
esac

script=$script_root/$filename

case "$action" in
  "edit")
    edit $script
    ;;
  "ledit")
    edit $script
    ;;
  *)
    echo Unknown action $action
    usage
    ;;
esac
